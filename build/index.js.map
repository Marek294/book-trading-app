{"version":3,"sources":["../server/index.js"],"names":["app","server","Server","webpack","webpackMiddleware","webpackHotMiddleware","webpackConfig","process","env","NODE_ENV","trim","require","compiler","use","hot","publicPath","output","noInfo","urlencoded","json","static","get","req","res","sendFile","join","__dirname","port","PORT","listen","console","log","exports","module"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAJA;AAMA,IAAIA,MAAM,wBAAV;AATA;;AAUA,IAAIC,SAAS,eAAKC,MAAL,CAAYF,GAAZ,CAAb;;AAEA,IAAIG,OAAJ;AACA,IAAIC,iBAAJ;AACA,IAAIC,oBAAJ;AACA,IAAIC,aAAJ;;AAEA,IAAGC,QAAQC,GAAR,CAAYC,QAAZ,CAAqBC,IAArB,OAAgC,aAAnC,EAAkD;AAC9CP,cAAUQ,QAAQ,SAAR,CAAV;AACAP,wBAAoBO,QAAQ,wBAAR,CAApB;AACAN,2BAAuBM,QAAQ,wBAAR,CAAvB;;AAEAL,oBAAgBK,QAAQ,uBAAR,CAAhB;AACA,QAAMC,WAAWT,QAAQG,aAAR,CAAjB;;AAEAN,QAAIa,GAAJ,CAAQT,kBAAkBQ,QAAlB,CAAR;AACAZ,QAAIa,GAAJ,CAAQR,qBAAqBO,QAArB,EAA+B;AACnCE,aAAK,IAD8B;AAEnCC,oBAAYT,cAAcU,MAAd,CAAqBD,UAFE;AAGnCE,gBAAQ;AAH2B,KAA/B,CAAR;AAKH;;AAEDjB,IAAIa,GAAJ,CAAQ,qBAAWK,UAAX,EAAR;AACAlB,IAAIa,GAAJ,CAAQ,qBAAWM,IAAX,EAAR;AACAnB,IAAIa,GAAJ,CAAQ,kBAAQO,MAAR,CAAe,QAAf,CAAR;AACApB,IAAIa,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEAb,IAAIa,GAAJ,CAAQ,YAAR;AACAb,IAAIa,GAAJ,CAAQ,mBAAR;AACAb,IAAIa,GAAJ,CAAQ,YAAR;AACAb,IAAIa,GAAJ,CAAQ,eAAR;;AAEAb,IAAIqB,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACvBA,QAAIC,QAAJ,CAAa,eAAKC,IAAL,CAAUC,SAAV,EAAoB,sBAApB,CAAb;AACH,CAFD;;AAIA,IAAIC,OAAOpB,QAAQC,GAAR,CAAYoB,IAAZ,IAAoB,IAA/B;;AAEA3B,OAAO4B,MAAP,CAAcF,IAAd,EAAoB,YAAW;AAC3BG,YAAQC,GAAR,CAAY,8BAA4BJ,IAAxC;AACH,CAFD;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAK,UAAUC,OAAOD,OAAP,GAAiBhC,GAA3B","file":"index.js","sourcesContent":["import express from 'express';\r\nimport path from 'path';\r\nimport bodyParser from 'body-parser';\r\nimport morgan from 'morgan';\r\n//import socket from 'socket.io';\r\nimport http from 'http';\r\n\r\n//import webpackConfig from '../webpack.config.dev';\r\nimport users from './routes/users';\r\nimport auth from './routes/auth';\r\nimport books from './routes/books';\r\nimport requests from './routes/requests';\r\n\r\nlet app = express();\r\nlet server = http.Server(app);\r\n\r\nvar webpack;\r\nvar webpackMiddleware;\r\nvar webpackHotMiddleware;\r\nvar webpackConfig;\r\n\r\nif(process.env.NODE_ENV.trim() === 'development') {\r\n    webpack = require('webpack');\r\n    webpackMiddleware = require('webpack-dev-middleware');\r\n    webpackHotMiddleware = require('webpack-hot-middleware');\r\n\r\n    webpackConfig = require('../webpack.config.dev');\r\n    const compiler = webpack(webpackConfig);\r\n\r\n    app.use(webpackMiddleware(compiler));\r\n    app.use(webpackHotMiddleware(compiler, {\r\n        hot: true,\r\n        publicPath: webpackConfig.output.publicPath,\r\n        noInfo: true\r\n    }));\r\n}\r\n\r\napp.use(bodyParser.urlencoded());\r\napp.use(bodyParser.json());\r\napp.use(express.static('public'));\r\napp.use(morgan('dev'));\r\n\r\napp.use('/api/users', users);\r\napp.use('/api/authenticate', auth);\r\napp.use('/api/books', books);\r\napp.use('/api/requests', requests);\r\n\r\napp.get('*', (req, res) => {\r\n    res.sendFile(path.join(__dirname,'../public/index.html'));\r\n});\r\n\r\nvar port = process.env.PORT || 3000;\r\n\r\nserver.listen(port, function() {\r\n    console.log('Server listening at port '+port);\r\n});\r\n\r\n// // Setup socket\r\n// var io = socket(server);\r\n//\r\n// io.on('connection', function(socket) {\r\n//     console.log('Connection was made ' + socket.id);\r\n//     socket.on('CHANGE_REQUEST', function(data) {\r\n//         console.log(data);\r\n//         socket.broadcast.emit('SERVER_CHANGE_REQUEST', data);\r\n//     });\r\n// });\r\n\r\n// Expose app\r\nexports = module.exports = app;"]}